{"version":3,"sources":["server.js"],"names":["PORT","process","env","server","wss","app","on","ws","console","log","message","objMessage","JSON","parse","listen","address","port"],"mappings":";;AAAA;;AAEA;;AACA;;;;AACA;;;;AACA;;;;;;AAJA;AAMA,IAAMA,OAAOC,QAAQC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AACA,IAAMG,SAAS,yBAAf;AACA,IAAMC,MAAM,eAAW,EAAED,QAAQA,MAAV,EAAX,CAAZ;;AAEA,IAAME,MAAM,wBAAZ;;AAEAD,IAAIE,EAAJ,CAAO,YAAP,EAAqB,UAACC,EAAD,EAAQ;AACzB;AACAC,YAAQC,GAAR,CAAY,0BAAZ;AACA;AACA;;AAEAF,OAAGD,EAAH,CAAM,SAAN,EAAiB,UAACI,OAAD,EAAa;AAC1B,YAAIC,aAAaC,KAAKC,KAAL,CAAWH,OAAX,CAAjB;AACA,sCAAeH,EAAf,EAAmBI,UAAnB;AACH,KAHD;AAIH,CAVD;;AAYAR,OAAOG,EAAP,CAAU,SAAV,EAAqBD,GAArB;AACAF,OAAOW,MAAP,CAAcd,IAAd,EAAoB;AAAA,WAAMQ,QAAQC,GAAR,CAAY,kBAAkBN,OAAOY,OAAP,GAAiBC,IAA/C,CAAN;AAAA,CAApB;;AAEA,4BAAkBX,GAAlB;;AAEAG,QAAQC,GAAR,CAAY,sCAAsCT,IAAlD","file":"server.js","sourcesContent":["import { createServer } from 'http'\n// import url from 'url'\nimport { Server } from 'ws'\nimport express from 'express'\nimport startStaticServer from './staticServer'\nimport messageHandler from './messageHandler'\n\nconst PORT = process.env.PORT || 8089\nconst server = createServer()\nconst wss = new Server({ server: server })\n\nconst app = express()\n\nwss.on('connection', (ws) => {\n    // var location = url.parse(ws.upgradeReq.url, true)\n    console.log('connection from a client')\n    // you might use location.query.access_token to authenticate or share sessions\n    // or ws.upgradeReq.headers.cookie (see http://stackoverflow.com/a/16395220/151312)\n\n    ws.on('message', (message) => {\n        var objMessage = JSON.parse(message)\n        messageHandler(ws, objMessage)\n    })\n})\n\nserver.on('request', app)\nserver.listen(PORT, () => console.log('Listening on ' + server.address().port))\n\nstartStaticServer(app)\n\nconsole.log('started signaling server on port ' + PORT)\n"],"sourceRoot":"/source/"}