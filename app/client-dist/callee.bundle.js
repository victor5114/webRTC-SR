!function(e){function n(t){if(o[t])return o[t].exports;var r=o[t]={exports:{},id:t,loaded:!1};return e[t].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var o={};return n.m=e,n.c=o,n.p="",n(0)}([function(e,n,o){e.exports=o(3)},function(e,n){"use strict";function o(e){function n(e){u=new WebSocket(e),u.onopen=o,u.onclose=t,u.onmessage=i,u.onerror=r}function o(){c("init",e)}function t(){console.error("connection closed")}function r(e){console.error("error:",e)}function i(e){var n=JSON.parse(e.data);switch(n.type){case"ICECandidate":f.onICECandidate(n.ICECandidate,n.source);break;case"offer":f.onOffer(n.offer,n.source);break;case"answer":f.onAnswer(n.answer,n.source);break;default:throw new Error("invalid message type")}}function c(e,n,o){var t={};t.type=e,t[e]=n,t.destination=o,u.send(JSON.stringify(t))}function a(e,n){c("ICECandidate",e,n)}function d(e,n){c("offer",e,n)}function s(e,n){c("answer",e,n)}var u=null,f=this;this.connectToTracker=n,this.sendICECandidate=a,this.sendOffer=d,this.sendAnswer=s,this.onOffer=function(e,n){console.log("offer from peer:",n,":",e)},this.onAnswer=function(e,n){console.log("answer from peer:",n,":",e)},this.onICECandidate=function(e,n){console.log("ICECandidate from peer:",n,":",e)}}function t(e,n){var t=new o(n);return t.connectToTracker(e),t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},function(e,n,o){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function r(e){function n(n){var o=new t(s,{optional:[{DtlsSrtpKeyAgreement:!0}]});return o.onicecandidate=function(e){e.candidate&&d.sendICECandidate(e.candidate,n)},d.onICECandidate=function(e,n){console.log("receiving ICE candidate from ",n),o.addIceCandidate(new r(e))},o.ondatachannel=function(n){var o=n.channel;console.log("channel received"),window.channel=o,o.onmessage=function(n){e(n.data)}},o}var o=window.RTCSessionDescription||window.mozRTCSessionDescription,t=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,r=window.RTCIceCandidate||window.mozRTCIceCandidate,i="ws://localhost:8089/",d=(0,c.default)(i,a),s={iceServers:[{urls:"stun:stun.1.google.com:19302"}]};d.onOffer=function(e,t){console.log("receive offer");var r=n(t);r.setRemoteDescription(new o(e)),r.createAnswer(function(e){r.setLocalDescription(e),console.log("send answer"),d.sendAnswer(e,t)},function(e){console.error(e)})}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var i=o(1),c=t(i),a=2},function(e,n,o){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var r=o(2),i=t(r);window.addEventListener("load",function(){var e=document.getElementById("received");(0,i.default)(function(n){var o=document.createTextNode(n);e.appendChild(o)}),document.getElementById("send").onclick=function(){var e=document.getElementById("message").value;window.channel.send(e)}},!1)}]);