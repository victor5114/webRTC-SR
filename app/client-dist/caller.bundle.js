!function(e){function n(t){if(o[t])return o[t].exports;var r=o[t]={exports:{},id:t,loaded:!1};return e[t].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var o={};return n.m=e,n.c=o,n.p="",n(0)}([function(e,n,o){e.exports=o(5)},function(e,n){"use strict";function o(e){function n(e){u=new WebSocket(e),u.onopen=o,u.onclose=t,u.onmessage=i,u.onerror=r}function o(){c("init",e)}function t(){console.error("connection closed")}function r(e){console.error("error:",e)}function i(e){var n=JSON.parse(e.data);switch(n.type){case"ICECandidate":f.onICECandidate(n.ICECandidate,n.source);break;case"offer":f.onOffer(n.offer,n.source);break;case"answer":f.onAnswer(n.answer,n.source);break;default:throw new Error("invalid message type")}}function c(e,n,o){var t={};t.type=e,t[e]=n,t.destination=o,u.send(JSON.stringify(t))}function a(e,n){c("ICECandidate",e,n)}function d(e,n){c("offer",e,n)}function s(e,n){c("answer",e,n)}var u=null,f=this;this.connectToTracker=n,this.sendICECandidate=a,this.sendOffer=d,this.sendAnswer=s,this.onOffer=function(e,n){console.log("offer from peer:",n,":",e)},this.onAnswer=function(e,n){console.log("answer from peer:",n,":",e)},this.onICECandidate=function(e,n){console.log("ICECandidate from peer:",n,":",e)}}function t(e,n){var t=new o(n);return t.connectToTracker(e),t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=t},,,function(e,n,o){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function r(e){function n(n){var i=new t(s,{optional:[{DtlsSrtpKeyAgreement:!0}]});d.onAnswer=function(e,n){console.log("receive answer from ",n),i.setRemoteDescription(new o(e))},d.onICECandidate=function(e,n){console.log("receiving ICE candidate from ",n),i.addIceCandidate(new r(e))},i.onicecandidate=function(e){e.candidate&&d.sendICECandidate(e.candidate,n)};var c=i.createDataChannel("communication",{reliable:!1});i.createOffer(function(e){i.setLocalDescription(e),console.log("send offer"),d.sendOffer(e,n)},function(e){console.error(e)}),window.channel=c,c.onclose=function(e){console.log("dataChannel closed")},c.onerror=function(e){console.error("dataChannel error")},c.onopen=function(){console.log("dataChannel opened")},c.onmessage=function(n){e(n.data)}}var o=window.RTCSessionDescription||window.mozRTCSessionDescription,t=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,r=window.RTCIceCandidate||window.mozRTCIceCandidate,i="ws://localhost:8089/",d=(0,c.default)(i,a),s={iceServers:[{urls:"stun:stun.1.google.com:19302"}]};window.startCommunication=n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var i=o(1),c=t(i),a=1},function(e,n,o){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var r=o(4),i=t(r);window.addEventListener("load",function(){var e=document.getElementById("received");(0,i.default)(function(n){var o=document.createTextNode(n);e.appendChild(o)}),document.getElementById("send").onclick=function(){var e=document.getElementById("message").value;window.channel.send(e)},document.getElementById("start").onclick=function(){window.startCommunication(2)}},!1)}]);